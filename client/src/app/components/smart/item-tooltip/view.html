<div 
	ng-if="ctrl.tooltip.open"
	mouse-follow
	class="tooltip-container tooltip-container-default">
	<div ng-if="!ctrl.fetching">
		<i class="item-pre-header dark-gray serif">
			{{ ctrl.typeName }}
		</i>

		<div class="item-tooltip-content" ng-if="ctrl.item">
			<div class="item-header">
				<span class="text-middle icon icon-mini tooltip-icon" style="background-image: url('{{ ctrl.item.icon }}')"></span>

				<span class="text-middle item-name item-name-default serif" ng-class="ctrl.item.rarity.toLowerCase()">
					{{ ctrl.item.name }}
				</span>
			</div>

			<div class="item-is-gear">
				<div ng-if="ctrl.item.details.defense">
					Defense: <span class="green">{{ ctrl.item.details.defense }}</span>
				</div>

				<div ng-if="ctrl.item.type === 'Weapon'">
					<span>Weapon Strength:</span>
					<span class="green">{{ ctrl.item.details.min_power }} - {{ ctrl.item.details.max_power }}</span>
				</div>
				
				<!-- todo: parse some values that are one word into do (i.e. conditiondamage -> condition damage) -->
				<div class="green" ng-repeat="infix in ctrl.item.details.infix_upgrade.attributes">
					{{ '+' + infix.modifier + ' ' + infix.attribute }}
				</div>

				<upgrade-component ng-if="ctrl.item.has_slot_one" upgrade="ctrl.item.details.upgrade_one"></upgrade-component>

				<upgrade-component ng-if="ctrl.item.has_slot_two" upgrade="ctrl.item.details.upgrade_two"></upgrade-component>

				<div class="tooltip-gap"></div>

				<div class="skin-details">
					<div ng-if="ctrl.item.original_name">Transmuted</div>

					<!-- todo: if account owned skins is released make this update if the user is logged in -->
					<div ng-if="!ctrl.item.original_name">Skin Locked</div>
					{{ ctrl.item.original_name || ctrl.item.name }}
				</div>
			</div>

			<div class="tooltip-gap"></div>

			<div class="item-summary">
				<div>{{ ctrl.item.rarity }}</div>
				
				<div>{{ ctrl.item.details.weight_class }}</div>
				
				<div>{{ ctrl.item.details.type }} {{ ctrl.item.type }}</div>
				
				<div>{{ ctrl.item.description }}</div>
				
				<div ng-if="ctrl.item.level">
					{{ 'Required Level: ' + ctrl.item.level }}
				</div>

				<div>{{ ctrl.item.boundStatus }}</div>

				<div class="item-cost">
					<span class="gold" ng-if="ctrl.item.gold">
						{{ ctrl.item.gold }}
						<span class="icon icon-micro icon-gold sticky-bottom"></span>
						<span class="icon icon-micro"></span>
					</span>

					<span class="silver" ng-if="ctrl.item.silver">
						{{ ctrl.item.silver }}
						<span class="icon icon-micro icon-silver sticky-bottom"></span>
						<span class="icon icon-micro"></span>
					</span>

					<span class="copper" ng-if="ctrl.item.copper">
						{{ ctrl.item.copper }}
						<span class="icon icon-micro icon-copper sticky-bottom"></span>
						<span class="icon icon-micro"></span>
					</span>
				</div>
			</div>
		</div>
	</div>

	<div ng-if="ctrl.fetching" class="progress-indicator animating"></div>
</div>